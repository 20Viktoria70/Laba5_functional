# Матриця 2×2 і лінійні перетворення
# Добуток типів Matrix2. Операції: детермінант, обернена, добуток.

from dataclasses import dataclass

@dataclass(frozen=True)
class Matrix2:
    a: float; b: float
    c: float; d: float    # матриця [[a, b], [c, d]]


def det(m: Matrix2) -> float:
    match m:
        case Matrix2(a, b, c, d):
            return a*d - b*c


def inverse(m: Matrix2) -> Matrix2 | None:
    match m:
        case Matrix2(a, b, c, d):
            determinant = a*d - b*c
            if determinant == 0:
                return None
            inv = 1 / determinant
            return Matrix2(d*inv, -b*inv, -c*inv, a*inv)


def mul_matrix(m1: Matrix2, m2: Matrix2) -> Matrix2:
    match m1, m2:
        case Matrix2(a, b, c, d), Matrix2(e, f, g, h):
            return Matrix2(
                a*e + b*g,  a*f + b*h,
                c*e + d*g,  c*f + d*h
            )
